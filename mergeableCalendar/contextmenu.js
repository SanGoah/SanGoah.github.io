!function(n,o){n.fn.extend({contextMenu:function(o,t){var l=this,r=n.extend({},c,o);n(l).bind("contextmenu",(function(){return!1})),n(l).mousedown((function(o){if(i==o.which){var c=Math.max.apply(null,n.map(n("body > *"),(function(o,c){if(null!=n(o).css("position"))return parseInt(n(o).css("z-index"))||1})));n.each(n("ul[role='john_contextmenu']"),(function(){"john_contextmenu"!=n(this).attr("name")&&n(this).remove()}));var a=n('<ul id="john_contextmenu" class="john_contextmenu-menu pull-right" role="john_contextmenu"></ul>');n.each(r.menus,(function(o,c){var i=n('<li class="john-divider"></li>');if(0==c.children.length){c=n.extend({},e,c);var u=s.menuContent(c,l,o,t||c.title);a.append(u),null!=r.menus[o+1]&&a.append(i)}else a.append(s.menuDGEach(c,l,o,t)),null!=r.menus[o+1]&&a.append(i)})),n("body").append(a),n("ul[role='john_contextmenu']").css({top:o.pageY,left:o.pageX,display:"block"}),n("ul[role='john_contextmenu']").css("background-color",r.bgColor),n("ul[role='john_contextmenu']").css("border-radius",r.border_radius),n("ul[role='john_contextmenu']").css("z-index",c),n("ul[role='john_contextmenu']").bind("contextmenu",(function(){return!1})),n(".john-divider").css({"border-color":r.line_color}),n("html").click((function(o){"kongzhi"!=n(o.target).attr("name")&&n.each(n("ul[role='john_contextmenu']"),(function(){n(this).remove()}))}))}}));var s={menuDGEach:function(o,c,i,t){var l=n('<li class="john-dropdown-submenu"></li>'),a=n('<a href="javascript:void(0);"></a>'),u=n('<span class="john_contextmenu-icon"><i class="'+o.icon+'"></i></span><span>'+o.title+"</span>");a.append(u),a.append('<span class="john_contextmenu_children"><i class="icon-caret-right"></i></span>'),l.append(a);var d=n('<ul class="john_contextmenu-menu"></ul>');return n.each(o.children,(function(i,l){l=n.extend({},e,l);var r=n('<li class="john-divider"></li>'),a=s.menuContent(l,c,i,t||l.title);d.append(a),null!=o.children[i+1]&&d.append(r)})),n(a).css({color:r.default_color}),n(l).hover((function(){0==n(this).index()?(n(this).css("border-top-left-radius",r.border_radius),n(this).css("border-top-right-radius",r.border_radius)):n(this).index()==n(this).parent().children().length-1&&(n(this).css("border-bottom-left-radius",r.border_radius),n(this).css("border-bottom-right-radius",r.border_radius)),n(this).css("background-color",r.color_block),n(this).children().eq(0).css({color:r.hover_color}),n(this).children("ul").css({top:n(this).position().top+1,"background-color":r.bgColor,"border-radius":r.border_radius}),n(this).children("ul").show()}),(function(){n(this).css("background-color",""),n(this).children().eq(0).css({color:r.default_color}),n(this).children("ul").hide()})),l.append(d),l},menuContent:function(o,c,e,i){if(0!=o.children.length)return s.menuDGEach(o,c,e,"");var t=n('<li class="john_contextmenu-menu_li"></li>'),l=n('<a href="javascript:void(0);"></a>'),a=n('<span class="john_contextmenu-icon"><i class="'+o.icon+'"></i></span><span>'+o.title+"</span>");return l.append(a),l.click((function(){if(n.isFunction(o.callback)){var e={itme:o,elem:c,data:i};o.callback(e)}n.each(n("ul[role='john_contextmenu']"),(function(){n(this).remove()}))})),n(l).css({color:r.default_color}),t.append(l),n(t).hover((function(){0==n(this).index()?(n(this).css("border-top-left-radius",r.border_radius),n(this).css("border-top-right-radius",r.border_radius)):n(this).index()==n(this).parent().children().length-1&&(n(this).css("border-bottom-left-radius",r.border_radius),n(this).css("border-bottom-right-radius",r.border_radius)),n(this).css("background-color",r.color_block),n(this).children().eq(0).css({color:r.hover_color}),n(this).children("ul").css({top:n(this).position().top+1,"background-color":r.bgColor}),n(this).children("ul").show()}),(function(){n(this).css("background-color",""),n(this).children().eq(0).css({color:r.default_color}),n(this).children("ul").hide()})),t}}}});var c={menus:[{title:"新增",icon:"icon-plus",callback:function(n){c.callback(n)},children:[]},{title:"删除",icon:"icon-minus",callback:function(n){c.callback(n)},children:[]},{title:"修改",icon:"icon-pencil",callback:function(n){c.callback(n)},children:[]},{title:"查询",icon:"icon-spin icon-spinner-indicator",callback:function(n){c.callback(n)},children:[]},{title:"其它",icon:"",callback:function(n){c.callback(n)},children:[{title:"菜单一",icon:"icon-bars",callback:function(n){c.callback(n)},children:[]},{title:"菜单二",icon:"icon-bars",callback:function(n){c.callback(n)},children:[]}]}],data:"",default_color:"#272727",hover_color:"#fff",bgColor:"#fff",color_block:"#3280fc",line_color:"#e5e5e5",border_radius:"2px",callback:function(n){console.log(n),alert("《"+n.data+"》,按键盘“F12”键,前往浏览器控制台查看详细输出信息...")}},e={title:"示列菜单",icon:"icon-bars",callback:function(n){c.callback(n)},children:[]},i=3}(jQuery,window);