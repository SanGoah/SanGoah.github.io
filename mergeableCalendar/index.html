<!DOCTYPE html><html><head><meta charset="utf-8"><title>æ—¥å†</title><link rel="stylesheet" href="./style_calendar.css"><link rel="stylesheet" href="./contextmenu.css"><script src="./jquery.min.js"></script><script src="./contextmenu.js"></script><script src="./calendar.js"></script><script type="text/javascript">
        var today = new Date(),
            year = today.getFullYear(),
            month = today.getMonth() + 1,
            date = today.getDate(),
            cur_calendar = 0,
            calendar_list = ["æ€»è§ˆ", "è¿½æ¢¦èµ¤å­å¿ƒ", "æ©™è‰²å¤©ç©ºä¹‹ä¸‹", "è¯¸ç¥çš„é»„æ˜", "æ˜¥é£åˆç»¿æ±Ÿå—å²¸", "åƒ§ä¼½è“æ‘©", "æ°´è„šæµ®é’é›ï¼Œæ¹–å”‡æ»‰ç™½æ²™", "ç´«ç½—å…°æ°¸æ’èŠ±å›­"],
            colors_doing = ["#6C6C6C", "Crimson", "Tomato", "darkorange", "ForestGreen", "DarkTurquoise", "DodgerBlue", "#4A4AFF"],
            colors_finished = ["#E0E0E0", "#FFD2D2	", "#FFDAC8", "#FFF4C1", "#E8FFC4", "#D7FFEE", "#C4E1FF", "#DDDDFF"],
            archive = [{
                "startDate": year + "-" + month + "-" + date,
                "isFinished": false,
                "calendar_idx": 0,
                "name": "æ¬¢è¿ä½¿ç”¨æœ¬æ—¥å†~"
            }];

        function saveArchive() {
            if (typeof (Storage) !== "undefined")
                localStorage.archive = JSON.stringify(archive);
            else
                alert("æ­¤æµè§ˆå™¨ä¸æ”¯æŒå­˜æ¡£ã€‚");
        };
        function saveNameList() {
            if (typeof (Storage) !== "undefined")
                localStorage.name_list = JSON.stringify(calendar_list);
            else
                alert("æ­¤æµè§ˆå™¨ä¸æ”¯æŒå­˜æ¡£ã€‚");
        };

        var callback = function (data) {
            if (data.hasOwnProperty("do")) {
                if (data.do == "clear") {
                    var idx_in_archive = 1;
                    if (cur_calendar == 0) {
                        while (idx_in_archive != -1) {
                            idx_in_archive = archive.findIndex(o => o.startDate === data.startDate);
                            archive.splice(idx_in_archive, 1);
                        }
                    }
                    else {
                        while (idx_in_archive != -1) {
                            idx_in_archive = archive.findIndex(o => o.startDate === data.startDate && o.calendar_idx == cur_calendar);
                            archive.splice(idx_in_archive, 1);
                        }
                    }
                }
                else {
                    let idx_in_archive = archive.findIndex(o => o.name === data.event && o.startDate === data.startDate);
                    if (data.do == "finish")
                        archive[idx_in_archive].isFinished = true;
                    if (data.do == "delete")
                        archive.splice(idx_in_archive, 1);
                }
                saveArchive();
                $("#calendar").data("calendar").loadData(archive);
            }
        },
            menu_model = {
                menus: [{
                    title: 'â˜‘å®Œæˆ',
                    callback: function (data) {
                        callback(data);
                    },
                    children: []
                }, {
                    title: 'ğŸ—™åˆ é™¤',
                    callback: function (data) {
                        callback(data);
                    },
                    children: []
                }, {
                    title: 'ğŸ—‘æ¸…ç©º',
                    callback: function (data) {
                        callback(data);
                    },
                    children: []
                }]
            },
            menus = [];
    </script><link rel="alternate" href="/atom.xml" title="Mech_Mind's blog" type="application/atom+xml"></head><body><div id="calendar"></div><div><p>MergeableCalendar Version 0.1.0</p><p style="color:gray"> å•å‡»ä»¥ä¸ºæŸæ—¥å¢æ·»æ–°äº‹é¡¹ï¼Œå³å‡»ä»¥æ“ä½œæŸæ—¥çš„äº‹é¡¹ã€‚<br> å¯æ‰§è¡Œçš„æ“ä½œæœ‰ï¼šæŒ‡å®šä¸€äº‹é¡¹è¿›è¡Œåˆ é™¤ã€æŒ‡å®šä¸€äº‹é¡¹æ ‡è®°ä¸ºå®Œæˆã€æ¸…ç©ºåœ¨å½“å‰è§†å›¾ä¸‹å¯è§çš„å½“æ—¥æ‰€æœ‰äº‹é¡¹ã€‚<br> æœ¬æ—¥å†æ‹¥æœ‰ä¸€ä¸ªæ€»è§ˆè§†å›¾å’Œä¸ƒä¸ªå­è§†å›¾ã€‚æ¯ä¸ªå­è§†å›¾å‡å¯ä»¥è‡ªå®šä¹‰åç§°ã€‚æš‚ä¸æ”¯æŒæ–°å¢å’Œåˆ é™¤å­è§†å›¾ã€‚<br> æœ¬åº”ç”¨éœ€è¦ Web Storage æ”¯æŒï¼Œè¯·ä½¿ç”¨ Chrome 4.0+ æˆ– IE 8.0+ æˆ– FireFox 3.5+ æˆ– Safari 4.0+ æˆ– Opera 11.5+ æµè§ˆå™¨æ‰“å¼€æœ¬åº”ç”¨ã€‚<br> å¸Œæœ›è¿™ä¸ªå°å·¥å…·èƒ½å¸®åŠ©åˆ°ä½ ï¼Œä½¿ç”¨æ„‰å¿«à­§(à¹‘â€¢Ì€âŒ„â€¢Ìà¹‘)à«­âœ§</p></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginModelPath:"assets/",model:{jsonPath:"/live2dw/assets/hijiki.model.json"},display:{position:"right",width:200,height:290},mobile:{show:!1},log:!1,pluginJsPath:"lib/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html><script>

    console.log(localStorage);
    //localStorageä»¥å­—ç¬¦ä¸²å½¢å¼å­˜å‚¨
    //evalä¸€æ¬¡è½¬ä¸€å±‚ï¼Œå­å¯¹è±¡ä»ç„¶æ˜¯å­—ç¬¦ä¸²
    var userData = eval(localStorage);
    if (userData.hasOwnProperty("name_list"))
        calendar_list = eval(userData.name_list);
    if (userData.hasOwnProperty("archive") && "startDate" in eval(userData.archive)[0])
        archive = eval(userData.archive);

    $("#calendar").calendar({
        data: archive,
        mode: "month",
        //maxEvent: 1,
        showModeBtn: false,
        newDate: year + "-" + month + "-" + date,

        cellClick: function (res) {
            var input = prompt("ä¸ºã€" + calendar_list[cur_calendar] + "ã€‘" + res.date + "æ·»åŠ äº‹åŠ¡", "");
            if (input) {
                let idx_in_archive = archive.findIndex(o => o.name === input && o.startDate === res.date);
                if (idx_in_archive == -1) {
                    var str = {
                        "startDate": res.date,
                        "calendar_idx": cur_calendar,
                        "name": input
                    }
                    archive.push(str);
                    saveArchive();
                    $("#calendar").data("calendar").loadData(archive);
                }
                else
                    alert("åŒä¸€å¤©ä¸èƒ½æœ‰é‡åäº‹é¡¹ï¼Œä¸åœ¨åŒä¸€ä¸ªåˆ†æ—¥å†é‡Œä¹Ÿä¸è¡Œâ•®(â•¯_â•°)â•­");
            }
        },

    })

</script>